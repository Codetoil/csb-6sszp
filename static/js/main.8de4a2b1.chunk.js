(this.webpackJsonphamiltonian=this.webpackJsonphamiltonian||[]).push([[0],{10:function(t,i,s){"use strict";s.r(i);var h=s(0),e=s.n(h),o=s(3),n=s.n(o),a=s(4),m=s.n(a);class r{constructor(t,i){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-8,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e3;this.RKNodes=[0,2/9,1/3,3/4,1,5/6],this.RKMatrix=[[],[2/9],[1/12,1/4],[69/128,-243/128,135/64],[-17/12,6.75,-5.4,16/15],[65/432,-5/16,13/16,4/27,5/144]],this.RKWeights=[1/9,0,.1,16/45,1/12,0],this.RKWweightsWeightedAverage=[47/450,0,.48,32/225,1/30,.24],this.RKWeightsTruncationError=[-1/150,0,.03,-16/75,-.05,.24],this.doContinue=!0,this.absoluteMaximumReducer=(t,i)=>this.p5.abs(i)>this.p5.abs(t)?this.p5.abs(i):this.p5.abs(t),this.weightedAverageIncrement=(t,i,s)=>s.map(((s,h)=>Array(t).fill(0).map(((s,e)=>i[e][h]*this.RKMatrix[t][e]*this.dt)).reduce(((t,i)=>t+i),s))),this.truncationError=(t,i,s)=>Array(i.length).fill(0).map(((s,h)=>i[h][t]*this.RKWeightsTruncationError[h]*this.dt)).reduce(((t,i)=>t+i),s[t]),this.weightedAverage=(t,i,s,h)=>Array(i.length).fill(0).map(((s,h)=>i[h][t]*this.RKWweightsWeightedAverage[h]*this.dt)).reduce(((t,i)=>t+i),h[t]+s[t]),this.step=(t,i)=>{if(void 0===t&&void 0===i)throw new Error("t and J are undefined");if(void 0===t)throw new Error("t is undefined");if(void 0===i)throw new Error("J is undefined");var s,h;this.numberSteps=0;do{h=[],s=new Array(i.length).fill(0);for(var e=0;e<this.RKNodes.length;e++)h[e]=this.F(this.weightedAverageIncrement(e,h,i),t+this.dt*this.RKNodes[e]),0===e&&(h[0]=this.F(i,t+this.dt*this.RKNodes[0]));for(var o=0;o<i.length;o++)s[o]=this.truncationError(o,h,s);this.dt*=this.p5.pow(this.tol/this.p5.abs(s.reduce(this.absoluteMaximumReducer,0)),.05),this.numberSteps++}while(this.p5.abs(this.p5.log(this.tol)-this.p5.log(this.p5.abs(s.reduce(this.absoluteMaximumReducer,0))))>this.tol2&&this.numberSteps<this.maximumIterations);if(this.errorDisplayed=s.reduce(this.absoluteMaximumReducer,0),this.numberSteps>=this.maximumIterations)return this.doContinue=!1,console.error("Can't reduce tolerance of error below tolerance in "+this.maximumIterations+" iterations: "+this.p5.abs(this.p5.log(this.tol)-this.p5.log(this.errorDisplayed))+" > "+this.tol2),[t,i];for(var n=i,a=0;a<n.length;a++)n[a]=this.weightedAverage(a,h,s,n);return[t+this.dt,n]},this.F=t,this.p5=i,this.tol=s,this.tol2=h,this.maximumIterations=e}}class p{constructor(t){this.m1=1,this.m2=1,this.mc=1e3,this.k=-13.317,this.c=0,this.xmin=-2,this.xmax=2,this.ymin=-2,this.ymax=2,this.deltaMomentumx=1e-4,this.deltaMomentumy=1e-4,this.deltaPositionx=1e-4,this.deltaPositiony=1e-4,this.restart=()=>{this.p5.background(255,255,255),this.positionx1=1.5,this.positiony1=0,this.positionx2=1,this.positiony2=0,this.momentumx1=0,this.momentumy1=70,this.momentumx2=0,this.momentumy2=100,this.s=0,this.simulator.dt=1e-10,this.simulator.doContinue=!0,console.clear()},this.hamiltonian=(t,i,s,h,e,o,n,a,m)=>this.k*this.m1*this.m2/this.p5.sqrt(this.p5.pow(this.p5.abs(t-s),2)+this.p5.pow(this.p5.abs(i-h),2))+this.k*this.m1*this.mc/this.p5.sqrt(this.p5.pow(this.p5.abs(t),2)+this.p5.pow(this.p5.abs(i),2))+this.k*this.m2*this.mc/this.p5.sqrt(this.p5.pow(this.p5.abs(s),2)+this.p5.pow(this.p5.abs(h),2))+1/this.m1*.5*(this.p5.pow(e,2)+this.p5.pow(o,2))+1/this.m2*.5*(this.p5.pow(n,2)+this.p5.pow(a,2)),this.forcex1=(t,i,s,h,e,o,n,a,m)=>-(this.hamiltonian(t+this.deltaPositionx,i,s,h,e,o,n,a,m)-this.hamiltonian(t-this.deltaPositionx,i,s,h,e,o,n,a,m))/(2*this.deltaPositionx)-this.c*e,this.forcey1=(t,i,s,h,e,o,n,a,m)=>-(this.hamiltonian(t,i+this.deltaPositiony,s,h,e,o,n,a,m)-this.hamiltonian(t,i-this.deltaPositiony,s,h,e,o,n,a,m))/(2*this.deltaPositiony)-this.c*o,this.velocityx1=(t,i,s,h,e,o,n,a,m)=>(this.hamiltonian(t,i,s,h,e,o+this.deltaMomentumx,n,a,m)-this.hamiltonian(t,i,s,h,e-this.deltaMomentumx,o,n,a,m))/(2*this.deltaMomentumx),this.velocityy1=(t,i,s,h,e,o,n,a,m)=>(this.hamiltonian(t,i,s,h,e,o+this.deltaMomentumy,n,a,m)-this.hamiltonian(t,i,s,h,e,o-this.deltaMomentumy,n,a,m))/(2*this.deltaMomentumy),this.forcex2=(t,i,s,h,e,o,n,a,m)=>-(this.hamiltonian(t,i,s+this.deltaPositionx,h,e,o,n,a,m)-this.hamiltonian(t,i,s-this.deltaPositionx,h,e,o,n,a,m))/(2*this.deltaPositionx)-this.c*n,this.forcey2=(t,i,s,h,e,o,n,a,m)=>-(this.hamiltonian(t,i,s,h+this.deltaPositiony,e,o,n,a,m)-this.hamiltonian(t,i,s,h-this.deltaPositiony,e,o,n,a,m))/(2*this.deltaPositiony)-this.c*a,this.velocityx2=(t,i,s,h,e,o,n,a,m)=>(this.hamiltonian(t,i,s,h,e,o,n+this.deltaMomentumx,a,m)-this.hamiltonian(t,i,s,h,e,o,n-this.deltaMomentumx,a,m))/(2*this.deltaMomentumx),this.velocityy2=(t,i,s,h,e,o,n,a,m)=>(this.hamiltonian(t,i,s,h,e,o,n,a+this.deltaMomentumy,m)-this.hamiltonian(t,i,s,h,e,o,n,a-this.deltaMomentumy,m))/(2*this.deltaMomentumy),this.der=(t,i)=>[this.velocityx1,this.velocityy1,this.velocityx2,this.velocityy2,this.forcex1,this.forcey1,this.forcex2,this.forcey2].map((function(s){return s(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],i)})),this.draw=()=>{if(this.p5.mouseIsPressed&&this.restart(),this.simulator.doContinue){this.p5.strokeWeight(2),this.p5.background(255,255,255),this.p5.line(this.p5.map(this.xmin,this.xmin,this.xmax,0,this.p5.width),this.p5.map(0,this.ymin,this.ymax,this.p5.height,0),this.p5.map(this.xmax,this.xmin,this.xmax,0,this.p5.width),this.p5.map(0,this.ymin,this.ymax,this.p5.height,0)),this.p5.line(this.p5.map(0,this.xmin,this.xmax,0,this.p5.width),this.p5.map(this.ymin,this.ymin,this.ymax,this.p5.height,0),this.p5.map(0,this.xmin,this.xmax,0,this.p5.width),this.p5.map(this.ymax,this.ymin,this.ymax,this.p5.height,0)),this.p5.strokeWeight(10),this.p5.point(this.p5.map(0,this.xmin,this.xmax,0,this.p5.width),this.p5.map(0,this.ymin,this.ymax,this.p5.height,0)),this.p5.strokeWeight(5),this.p5.point(this.p5.map(this.positionx1,this.xmin,this.xmax,0,this.p5.width),this.p5.map(this.positiony1,this.ymin,this.ymax,this.p5.height,0)),this.p5.point(this.p5.map(this.positionx2,this.xmin,this.xmax,0,this.p5.width),this.p5.map(this.positiony2,this.ymin,this.ymax,this.p5.height,0)),this.p5.strokeWeight(1),this.p5.text("t: "+this.s,10,10),this.p5.text("dt: "+this.simulator.dt,10,20),this.p5.text("n: "+this.simulator.numberSteps,10,30),this.p5.text("err: "+this.simulator.errorDisplayed,10,40),this.p5.text("H: "+this.hamiltonian(this.positionx1,this.positiony1,this.positionx2,this.positiony2,this.momentumx1,this.momentumy1,this.momentumx2,this.momentumy2,this.s),10,50),this.p5.fill(0,0,0);let t=this.simulator.step(this.s,[this.positionx1,this.positiony1,this.positionx2,this.positiony2,this.momentumx1,this.momentumy1,this.momentumx2,this.momentumy2]);this.s=t[0],this.positionx1=t[1][0],this.positiony1=t[1][1],this.positionx2=t[1][2],this.positiony2=t[1][3],this.momentumx1=t[1][4],this.momentumy1=t[1][5],this.momentumx2=t[1][6],this.momentumy2=t[1][7]}},this.p5=t,this.simulator=new r(this.der,t,1e-6,void 0,1e5)}}var l=s(1);class d extends h.Component{constructor(){super(...arguments),this.setup=(t,i)=>{t.createCanvas(window.innerWidth,window.innerHeight).parent(i),t.frameRate(this.fr),t.strokeWeight(5),this.simulationState=new p(t),this.simulationState.restart()},this.draw=()=>{this.simulationState.draw()}}render(){return Object(l.jsx)(m.a,{setup:this.setup,draw:this.draw})}}const u=document.getElementById("root");n.a.render(Object(l.jsx)(e.a.StrictMode,{children:Object(l.jsx)(d,{})}),u)}},[[10,1,2]]]);
//# sourceMappingURL=main.8de4a2b1.chunk.js.map